const mongoose=require("mongoose"),blogSchema=new mongoose.Schema({title:{type:String,required:[!0,"Title cant be empty"],minlength:5,maxlength:100},content:{type:String,required:[!0,"Blog cant be empty"]},topic:{type:String},seoTitle:{type:String},seoDescription:{type:String},image:{type:String,required:[!0,"Please add image"]},altImage:{type:String,required:[!0,"Please price alt text to show on image for seo"]},status:{type:Boolean,default:!1},slug:{type:String,unique:!0},createdBy:{type:mongoose.Types.ObjectId,ref:"User"}},{timestamps:!0});blogSchema.pre("save",(async function(next){const slugBase=this.title.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");let slug=slugBase,suffix=1;for(;await mongoose.models.Blog.findOne({slug:slug});)slug=`${slugBase}-1`;this.slug=slug,next()})),module.exports=mongoose.model("Blog",blogSchema);