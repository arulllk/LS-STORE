const Blog=require("../models/blog"),{NotFoundError:NotFoundError,BadRequestError:BadRequestError}=require("../errors"),{uploadOnCloudinary:uploadOnCloudinary}=require("../utils/cloudinary"),fs=require("fs"),createBlog=async(req,res)=>{if(!req.file)throw new BadRequestError("Image is missing",{image:"Image is required"});console.log("req file ",req.file);const{title:title,content:content,topic:topic,seoTitle:seoTitle,seoDescription:seoDescription,altImage:altImage,slug:slug}=req.body,imagePath=req.file.path,result=await uploadOnCloudinary(imagePath,"Blog"),newBlog=new Blog({title:title,content:content,topic:topic,seoTitle:seoTitle,seoDescription:seoDescription,altImage:altImage,slug:slug,image:result.secure_url});await newBlog.save(),res.status(201).json({status:"success",message:"Blog created successfully",data:{blog:newBlog,image:result}})};module.exports={createBlog:createBlog};